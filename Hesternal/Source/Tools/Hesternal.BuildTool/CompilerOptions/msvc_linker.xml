<?xml version="1.0" encoding="utf-8"?>
<Linker Name="MsvcLinker"
    >
    <!-- General -->
    <EnumFlag Name="ShowProgress"
              Default="NotSet"
              Description="Prints Linker Progress Messages"
        >
        <EnumValue Name="NotSet"
                   Description="No verbosity."
            />
        <EnumValue Name="LinkVerbose"
                   Flag="/VERBOSE"
                   Description="Displays all progress messages."
            />
        <EnumValue Name="LinkVerboseLib"
                   Flag="/VERBOSE:Lib"
                   Description="Displays progress messages indicating just the libraries searched."
            />
        <EnumValue Name="LinkVerboseICF"
                   Flag="/VERBOSE:ICF"
                   Description="Displays information about COMDAT folding during optimized linking."
            />
        <EnumValue Name="LinkVerboseREF"
                   Flag="/VERBOSE:REF"
                   Description="Displays information about functions and data removed during optimized linking."
            />
        <EnumValue Name="LinkVerboseSAFESEH"
                   Flag="/VERBOSE:SAFESEH"
                   Description="Displays information about modules incompatible with Safe Exception Handling."
            />
        <EnumValue Name="LinkVerboseCLR"
                   Flag="/VERBOSE:CLR"
                   Description="Display information about linker activity related to managed code."
            />
    </EnumFlag>
    <BoolFlag Name="LinkIncremental"
              Flag="/INCREMENTAL"
              ReverseFlag="/INCREMENTAL:NO"
              Default="false"
              Description="Enables incremental linking."
        />
    <BoolFlag Name="SuppressStartupBanner"
              Flag="/NOLOGO"
              Default="true"
              Description="The /NOLOGO option prevents display of the copyright message and version number."
        />
    <BoolFlag Name="IgnoreImportLibrary"
              Default="false"
              Description="Specifies that the import library generated by this configuration should not be imported into dependent projects."
        />
    <BoolFlag Name="RegisterOutput"
              Default="false"
              Description="Specifies whether to register the primary output of this build."
        />
    <BoolFlag Name="PerUserRedirection"
              Default="false"
              Description="When Register Output is enabled, Per-user redirection forces registry writes to HKEY_CLASSES_ROOT to be redirected to HKEY_CURRENT_USER."
        />
    <BoolFlag Name="LinkLibraryDependencies"
              Default="true"
              Description="Specifies whether or not library outputs from project dependencies are automatically linked in."
        />
    <BoolFlag Name="UseLibraryDependencyInputs"
              Default="false"
              Description="Specifies whether or not the inputs to the librarian tool are used rather than the library file itself when linking in library outputs of project dependencies."
        />
    <BoolFlag Name="LinkStatus"
              Flag="/LTCG:STATUS"
              ReverseFlag="/LTCG:NOSTATUS"
              Description="Specifies whether the linker should display a progress indicator showing what percentage of the link is complete."
        />
    <BoolFlag Name="PreventDllBinding"
              Flag="/ALLOWBIND"
              ReverseFlag="/ALLOWBIND:NO"
              Description="/ALLOWBIND:NO sets a bit in a DLL's header that indicates to Bind.exe that the image is not allowed to be bound. You may not want a DLL to be bound if it has been digitally signed (binding invalidates the signature)."
        />
    <BoolFlag Name="TreatLinkerWarningAsErrors"
              Flag="/WX"
              ReverseFlag="/WX:NO"
              Description="/WX causes no output file to be generated if the linker generates a warning."
        />
    <EnumFlag Name="ForceFileOutput"
              Description="The /FORCE option tells the linker to create an .exe file or DLL even if a symbol is referenced but not defined or is multiply defined. It may create invalid exe file."
        >
        <EnumValue Name="Enabled"
                   Flag="/FORCE"
                   Description="/FORCE with no arguments implies both multiple and unresolved."
            />
        <EnumValue Name="MultiplyDefinedSymbolOnly"
                   Flag="/FORCE:MULTIPLE"
                   Description="Use to create an output file whether or not LINK finds more than one definition for a symbol."
            />
        <EnumValue Name="UndefinedSymbolOnly"
                   Flag="/FORCE:UNRESOLVED"
                   Description="Use to create an output file whether or not LINK finds an undefined symbol. Ignored if the entry point symbol is unresolved."
            />
    </EnumFlag>
    <EnumFlag Name="CreateHotPatchableImage"
              Description="Prepares an image for hotpatching."
        >
        <EnumValue Name="Enabled"
                   Flag="/FUNCTIONPADMIN"
                   Description="Prepares an image for hotpatching."
            />
        <EnumValue Name="X86Image"
                   Flag="/FUNCTIONPADMIN:5"
                   Description="Prepares an X86 image for hotpatching."
            />
        <EnumValue Name="X64Image"
                   Flag="/FUNCTIONPADMIN:6"
                   Description="Prepares an X64 image for hotpatching."
            />
        <EnumValue Name="ItaniumImage"
                   Flag="/FUNCTIONPADMIN:16"
                   Description="Prepares an Itanium image for hotpatching."
            />
    </EnumFlag>

    <!-- Input -->
    <BoolFlag Name="IgnoreAllDefaultLibraries"
              Flag="/NODEFAULTLIB"
              Default="false"
              Description="The /NODEFAULTLIB option tells the linker to remove one or more default libraries from the list of libraries it searches when resolving external references."
        />

    <!-- Debugging -->
    <EnumFlag Name="GenerateDebugInformation"
              Default="False"
              Description="This option enables creation of debugging information for the .exe file or the DLL."
        >
        <EnumValue Name="False"
                   Description="Produces no debugging information."
            />
        <EnumValue Name="True"
                   Flag="/DEBUG"
                   Description="Generate Debug Information. Create a complete Program Database (PDB) ideal for distribution to Microsoft Symbol Server."
            />
        <EnumValue Name="DebugFastLink"
                   Flag="/DEBUG:FASTLINK"
                   Description="Generate Debug Information optimized for faster links. Produces a program database (PDB) ideal for edit-link-debug cycle."
            />
        <EnumValue Name="DebugFull"
                   Flag="/DEBUG:FULL"
                   Description="Generate Debug Information optimized for sharing and publishing. Produces a program database (PDB) ideal for edit-link-debug cycle."
            />
    </EnumFlag>
    <BoolFlag Name="GenerateMapFile"
              Flag="/MAP"
              Default="false"
              Description="The /MAP option tells the linker to create a mapfile."
        />
    <BoolFlag Name="MapExports"
              Flag="/MAPINFO:EXPORTS"
              Default="false"
              Description="The /MAPINFO option tells the linker to include the specified information in a mapfile, which is created if you specify the /MAP option. EXPORTS tells the linker to include exported functions."
        />
    <BoolFlag Name="AssemblyDebug"
              Flag="/ASSEMBLYDEBUG"
              ReverseFlag="/ASSEMBLYDEBUG:DISABLE"
              Description="/ASSEMBLYDEBUG emits the DebuggableAttribute attribute with debug information tracking and disables JIT optimizations."
        />

    <!-- System -->
    <EnumFlag Name="SubSystem"
              Default="Console"
              Description="The /SUBSYSTEM option tells the operating system how to run the .exe file. The choice of subsystem affects the entry point symbol (or entry point function) that the linker will choose."
        >
        <EnumValue Name="NotSet"
                   Description="No subsystem set."
            />
        <EnumValue Name="Console"
                   Flag="/SUBSYSTEM:CONSOLE"
                   Description="Win32 character-mode application. Console applications are given a console by the operating system. If main or wmain is defined, CONSOLE is the default."
            />

        <EnumValue Name="Windows"
                   Flag="/SUBSYSTEM:WINDOWS"
                   Description="Application does not require a console, probably because it creates its own windows for interaction with the user. If WinMain or wWinMain is defined, WINDOWS is the default."
            />
        <EnumValue Name="Native"
                   Flag="/SUBSYSTEM:NATIVE"
                   Description="Device drivers for Windows NT. If /DRIVER:WDM is specified, NATIVE is the default."
            />
        <EnumValue Name="EFI_Application"
                   VcxprojName="EFI Application"
                   Flag="/SUBSYSTEM:EFI_APPLICATION"
            />
        <EnumValue Name="EFI_Boot"
                   VcxprojName="EFI Boot"
                   Flag="/SUBSYSTEM:EFI_Boot"
            />
        <EnumValue Name="EFI_ROM"
                   VcxprojName="EFI ROM"
                   Flag="/SUBSYSTEM:EFI_ROM"
            />
        <EnumValue Name="EFI_Runtime"
                   VcxprojName="EFI Runtime"
                   Flag="/SUBSYSTEM:EFI_RUNTIME_DRIVER"
            />
        <EnumValue Name="WindowsCE"
                   Flag="/SUBSYSTEM:WINDOWSCE"
                   Description="Application that runs on a Windows CE device."
            />
        <EnumValue Name="POSIX"
                   Flag="/SUBSYSTEM:POSIX"
                   Description="Application that runs with the POSIX subsystem in Windows NT."
            />
    </EnumFlag>
    <BoolFlag Name="LargeAddressAware"
              Flag="/LARGEADDRESSAWARE"
              ReverseFlag="/LARGEADDRESSAWARE:NO"
              Description="The /LARGEADDRESSAWARE option tells the linker that the application can handle addresses larger than 2 gigabytes."
        />
    <BoolFlag Name="TerminalServerAware"
              Flag="/TSAWARE"
              ReverseFlag="/TSAWARE:NO"
              Description="The /TSAWARE option sets a flag in the IMAGE_OPTIONAL_HEADER DllCharacteristics field in the program image's optional header. When this flag is set, Terminal Server will not make certain changes to the application."
        />

    <!-- Optimization -->
    <BoolFlag Name="OptimizeReferences"
              Flag="/OPT:REF"
              ReverseFlag="/OPT:NOREF"
              Default="false"
              Description="/OPT:REF eliminates functions and/or data that are never referenced while /OPT:NOREF keeps functions and/or data that are never referenced."
        />
    <!-- // NOTE(v.matushkin): While it says that I can use =iterations, EnableCOMDATFolding variable type is bool in Microsoft.Build.CPPTasks.Common? -->
    <BoolFlag Name="EnableCOMDATFolding"
              Flag="/OPT:ICF"
              ReverseFlag="/OPT:NOICF"
              Default="false"
              Description="Use /OPT:ICF[=iterations] to perform identical COMDAT folding."
        />
    <EnumFlag Name="LinkTimeCodeGeneration"
              Description="Specifies link-time code generation."
        >
        <EnumValue Name="Default"
                   Description="Default LTCG setting."
            />
        <EnumValue Name="UseFastLinkTimeCodeGeneration"
                   Flag="/LTCG:incremental"
                   Description="Use Fast Link Time Code Generation"
            />
        <EnumValue Name="UseLinkTimeCodeGeneration"
                   Flag="/LTCG"
                   Description="Use Link Time Code Generation."
            />
        <EnumValue Name="PGInstrument"
                   Flag="/LTCG:PGInstrument"
                   Description="Profile Guided Optimization - Instrument. Specifies link-time code generation."
            />
        <EnumValue Name="PGOptimization"
                   Flag="/LTCG:PGOptimize"
                   Description="Profile Guided Optimization - Optimization. Specifies that the linker should use the profile data created after running the instrumented binary to create an optimized image."
            />
        <EnumValue Name="PGUpdate"
                   Flag="/LTCG:PGUpdate"
                   Description="Profile Guided Optimization - Update. Allows and tracks list of input files to be added or modified from what was specified in the :PGINSTRUMENT phase."
            />
    </EnumFlag>

    <!-- Windows Metadata -->
    <EnumFlag Name="GenerateWindowsMetadata"
              Description="Enables generation of a Windows Runtime Metadata (.winmd) file."
        >
        <EnumValue Name="True"
                   Flag="/WINMD"
                   Description="The default setting for Universal Windows Platform apps. The linker generates both the binary executable file and the .winmd metadata file."
            />
        <EnumValue Name="False"
                   Flag="/WINMD:NO"
                   Description="The linker generates only the binary executable file, but not a .winmd file."
            />
        <EnumValue Name="Only"
                   Flag="/WINMD:ONLY"
                   Description="The linker generates only the .winmd file, but not the binary executable file."
            />
    </EnumFlag>
    <StringFlag Name="WindowsMetadataFile"
                Flag="/WINMDFILE:"
                Description="Specifies the file name for the Windows Runtime Metadata (.winmd) output file that is generated by the /WINMD linker option."
        />
    <StringFlag Name="WindowsMetadataLinkKeyFile"
                Flag="/WINMDKEYFILE:"
                Description="Specifies a key or a key pair to sign a Windows Runtime Metadata (.winmd) file."
        />
    <StringFlag Name="WindowsMetadataKeyContainer"
                Flag="/WINMDKEYCONTAINER:"
                Description="Specifies a key container to sign a Windows Metadata (.winmd) file."
        />
    <BoolFlag Name="WindowsMetadataLinkDelaySign"
              Flag="/WINMDDELAYSIGN"
              ReverseFlag="/WINMDDELAYSIGN:NO"
              Description="Enables partial signing of a Windows Runtime Metadata (.winmd) file by putting the public key in the file."
        />

    <!-- Advanced -->
    <StringFlag Name="EntryPointSymbol"
                Flag="/ENTRY:"
                Description="The /ENTRY option specifies an entry point function as the starting address for an .exe file or DLL."
        />
    <BoolFlag Name="NoEntryPoint"
              Flag="/NOENTRY"
              Default="false"
              Description="The /NOENTRY option is required for creating a resource-only DLL. Use this option to prevent LINK from linking a reference to _main into the DLL."
        />
    <BoolFlag Name="SetChecksum"
              Flag="/RELEASE"
              Default="false"
              Description="The /RELEASE option sets the Checksum in the header of an .exe file."
        />
    <BoolFlag Name="RandomizedBaseAddress"
              Flag="/DYNAMICBASE"
              ReverseFlag="/DYNAMICBASE:NO"
              Default="true"
              Description="Specifies whether to generate an executable image that can be randomly rebased at load time by using the address space layout randomization (ASLR) feature of Windows."
        />
    <BoolFlag Name="DataExecutionPrevention"
              Flag="/NXCOMPAT"
              ReverseFlag="/NXCOMPAT:NO"
              Default="true"
              Description="Specifies whether to generate an executable image that can be randomly rebased at load time by using the address space layout randomization (ASLR) feature of Windows."
        />
    <!--  NOTE(v.matushkin): Seems like SupportUnloadOfDelayLoadedDLL and SupportUnloadOfDelayLoadedDLL should be combined into one option?
          If I get it right, it's two options in the IDE, but it's only one flag, the one specified later will override the previous one. -->
    <BoolFlag Name="SupportUnloadOfDelayLoadedDLL"
              Flag="/DELAY:UNLOAD"
              Description="The UNLOAD qualifier tells the delay-load helper function to support explicit unloading of the DLL."
        />
    <BoolFlag Name="SupportNobindOfDelayLoadedDLL"
              Flag="/DELAY:NOBIND"
              Description="The NOBIND qualifier tells the linker not to include a bindable IAT in the final image. The default is to create the bindable IAT for delay-loaded DLLs."
        />
    <EnumFlag Name="TargetMachine"
              Default="MachineX64"
              Description="The /MACHINE option specifies the target platform for the program."
        >
        <EnumValue Name="NotSet"
            />
        <EnumValue Name="MachineARM"
                   Flag="/MACHINE:ARM"
            />
        <EnumValue Name="MachineARM64"
                   Flag="/MACHINE:ARM64"
            />
        <EnumValue Name="MachineARM64EC"
                   Flag="/MACHINE:ARM64EC"
            />
        <EnumValue Name="MachineARM64X"
                   Flag="/MACHINE:ARM64X"
            />
        <EnumValue Name="MachineEBC"
                   Flag="/MACHINE:EBC"
            />
        <EnumValue Name="MachineIA64"
                   Flag="/MACHINE:IA64"
            />
        <EnumValue Name="MachineMIPS"
                   Flag="/MACHINE:MIPS"
            />
        <EnumValue Name="MachineMIPS16"
                   Flag="/MACHINE:MIPS16"
            />
        <EnumValue Name="MachineMIPSFPU"
                   Flag="/MACHINE:MIPSFPU"
            />
        <EnumValue Name="MachineMIPSFPU16"
                   Flag="/MACHINE:MIPSFPU16"
            />
        <EnumValue Name="MachineSH4"
                   Flag="/MACHINE:SH4"
            />
        <EnumValue Name="MachineTHUMB"
                   Flag="/MACHINE:THUMB"
            />
        <EnumValue Name="MachineX64"
                   Flag="/MACHINE:X64"
            />
        <EnumValue Name="MachineX86"
                   Flag="/MACHINE:X86"
            />
    </EnumFlag>
    <BoolFlag Name="Profile"
              Flag="/PROFILE"
              Default="false"
              Description="Produces an output file that can be used with the Performance Tools profiler. Requires GenerateDebugInformation (/DEBUG) to be set."
        />
</Linker>
